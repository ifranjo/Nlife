â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  NEW LIFE SOLUTIONS - PWA ARCHITECTURE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BROWSER (User)                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  VISIBLE UI                                                         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚    â”‚
â”‚  â”‚  â•‘  Navbar                           [Online] ğŸ“¦                â•‘  â”‚    â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚    â”‚
â”‚  â”‚  â•‘  Main Content (/hub, /tools/*)                              â•‘  â”‚    â”‚
â”‚  â”‚  â•‘                                                              â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  [Tool Cards Grid]                                           â•‘  â”‚    â”‚
â”‚  â”‚  â•‘                                                              â•‘  â”‚    â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚    â”‚
â”‚  â”‚  â•‘  Install Prompt (bottom-right, after 30s)                   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  â”‚ â—ˆ Install New Life Tools               â”‚                 â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  â”‚ Get quick access, work offline         â”‚                 â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  â”‚ [Install] [Not now]                    â”‚                 â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â•‘  â”‚    â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  SERVICE WORKER (sw.js) - Background Thread                        â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  1. INSTALL                                                         â”‚    â”‚
â”‚  â”‚     â””â”€> Cache static assets (/hub, /offline, etc.)                 â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  2. ACTIVATE                                                        â”‚    â”‚
â”‚  â”‚     â””â”€> Delete old caches (cleanup)                                â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  3. FETCH (intercept network requests)                             â”‚    â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚    â”‚
â”‚  â”‚     â”‚ Request received                        â”‚                    â”‚    â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚    â”‚
â”‚  â”‚                â”‚                                                    â”‚    â”‚
â”‚  â”‚                â”œâ”€> Check cache                                     â”‚    â”‚
â”‚  â”‚                â”‚   â”œâ”€ Found: Return cached (instant!)              â”‚    â”‚
â”‚  â”‚                â”‚   â”‚   â””â”€> Fetch network in background (update)    â”‚    â”‚
â”‚  â”‚                â”‚   â”‚                                                â”‚    â”‚
â”‚  â”‚                â”‚   â””â”€ Not found: Fetch network                     â”‚    â”‚
â”‚  â”‚                â”‚       â”œâ”€ Success: Cache + return                  â”‚    â”‚
â”‚  â”‚                â”‚       â””â”€ Fail (offline): Return /offline page     â”‚    â”‚
â”‚  â”‚                â”‚                                                    â”‚    â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚    â”‚
â”‚  â”‚     â”‚ CACHES                                   â”‚                   â”‚    â”‚
â”‚  â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚    â”‚
â”‚  â”‚     â”‚ static-v1:                               â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚   - /                                    â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚   - /hub                                 â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚   - /offline                             â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚                                          â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚ dynamic-v1:                              â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚   - /tools/pdf-merge                     â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚   - /tools/image-compress                â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚   - [cached on first visit]              â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚   - _astro/*.css                         â”‚                   â”‚    â”‚
â”‚  â”‚     â”‚   - _astro/*.js                          â”‚                   â”‚    â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  4. MESSAGE (cache management commands)                            â”‚    â”‚
â”‚  â”‚     â””â”€> SKIP_WAITING, CACHE_URLS, CLEAR_CACHE                      â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  MANIFEST (manifest.json) - App Metadata                            â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â€¢ name: "New Life Solutions - Free Online Tools"                  â”‚    â”‚
â”‚  â”‚  â€¢ short_name: "New Life Tools"                                    â”‚    â”‚
â”‚  â”‚  â€¢ start_url: "/hub"                                               â”‚    â”‚
â”‚  â”‚  â€¢ display: "standalone" (no browser UI)                           â”‚    â”‚
â”‚  â”‚  â€¢ theme_color: "#8b5cf6" (purple)                                 â”‚    â”‚
â”‚  â”‚  â€¢ background_color: "#0a0a0a" (dark)                              â”‚    â”‚
â”‚  â”‚  â€¢ icons: [72, 96, 128, 144, 152, 192, 384, 512]                   â”‚    â”‚
â”‚  â”‚  â€¢ shortcuts: [PDF Merge, Image Compress, QR Generator]            â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  USER FLOW - FIRST VISIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. User visits newlifesolutions.dev/hub
   â†“
2. Browser loads page (network request)
   â†“
3. Service worker registers in background
   â†“
4. SW caches static assets (/hub, /offline, etc.)
   â†“
5. Browser fires 'beforeinstallprompt' event
   â†“
6. InstallPrompt component captures event
   â†“
7. After 30 seconds, install prompt appears
   â†“
8. User clicks "Install"
   â†“
9. Browser shows native install dialog
   â†“
10. User confirms
    â†“
11. App installed, icon added to home screen/desktop
    â†“
12. App opens in standalone mode (no browser UI)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  USER FLOW - SUBSEQUENT VISITS (ONLINE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. User opens app (or navigates in browser)
   â†“
2. Service worker intercepts request
   â†“
3. SW checks cache â†’ FOUND
   â†“
4. SW returns cached version (0ms load time!)
   â†“
5. Page renders instantly
   â†“
6. SW fetches fresh version from network in background
   â†“
7. If new version available, prompts user to reload

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  USER FLOW - OFFLINE MODE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. User goes offline (airplane mode, no WiFi)
   â†“
2. Navbar detects: navigator.onLine = false
   â†“
3. Status changes to "Offline" (red dot)
   â†“
4. Cached indicator (ğŸ“¦) appears
   â†“
5. Screen reader announces: "You are offline. Cached content available."
   â†“
6. User navigates to /tools/pdf-merge
   â†“
7. Service worker intercepts request
   â†“
8. SW checks cache â†’ FOUND
   â†“
9. SW returns cached version
   â†“
10. Page loads instantly (no network needed!)
    â†“
11. User can use tool completely offline
    â†“
    [IF user tries to navigate to uncached page]
    â†“
12. SW checks cache â†’ NOT FOUND
    â†“
13. SW tries network â†’ FAILS (offline)
    â†“
14. SW returns /offline page
    â†“
15. Offline page shows list of cached tools

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  COMPONENT INTERACTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Layout.astro
  â”‚
  â”œâ”€> Registers service worker (sw.js)
  â”‚   â””â”€> Listens for updates
  â”‚       â””â”€> Prompts user to reload if new version
  â”‚
  â”œâ”€> Links manifest.json
  â”‚   â””â”€> Enables install prompt
  â”‚
  â””â”€> Renders page content
      â”‚
      â”œâ”€> Navbar.astro
      â”‚   â”‚
      â”‚   â”œâ”€> Shows online/offline status
      â”‚   â”‚   â””â”€> Updates on navigator.onLine changes
      â”‚   â”‚
      â”‚   â”œâ”€> Shows cached indicator (ğŸ“¦) when offline
      â”‚   â”‚   â””â”€> Checks cache storage for current page
      â”‚   â”‚
      â”‚   â””â”€> Renders InstallPrompt component
      â”‚       â”‚
      â”‚       â””â”€> InstallPrompt.tsx (React)
      â”‚           â”‚
      â”‚           â”œâ”€> Listens for 'beforeinstallprompt'
      â”‚           â”œâ”€> Waits 30 seconds
      â”‚           â”œâ”€> Shows install dialog
      â”‚           â”œâ”€> Handles user click
      â”‚           â””â”€> Triggers browser install flow
      â”‚
      â””â”€> Main content (tools)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  FILE STRUCTURE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

apps/web/
â”‚
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ manifest.json           â† App metadata (name, icons, theme)
â”‚   â”œâ”€â”€ sw.js                   â† Service worker (caching logic)
â”‚   â”œâ”€â”€ icons/                  â† PWA icons (72-512px)
â”‚   â”‚   â”œâ”€â”€ icon-72x72.png
â”‚   â”‚   â”œâ”€â”€ icon-96x96.png
â”‚   â”‚   â”œâ”€â”€ icon-128x128.png
â”‚   â”‚   â”œâ”€â”€ icon-144x144.png
â”‚   â”‚   â”œâ”€â”€ icon-152x152.png
â”‚   â”‚   â”œâ”€â”€ icon-192x192.png    â† Required minimum
â”‚   â”‚   â”œâ”€â”€ icon-384x384.png
â”‚   â”‚   â””â”€â”€ icon-512x512.png    â† Required minimum
â”‚   â””â”€â”€ screenshots/            â† Install prompt screenshots
â”‚       â”œâ”€â”€ hub-desktop.png     (1280x720)
â”‚       â””â”€â”€ hub-mobile.png      (750x1334)
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â””â”€â”€ Layout.astro        â† Modified: PWA meta tags, SW registration
â”‚   â”‚
â”‚   â”œâ”€â”€ components/ui/
â”‚   â”‚   â”œâ”€â”€ Navbar.astro        â† Modified: Status indicator, InstallPrompt
â”‚   â”‚   â””â”€â”€ InstallPrompt.tsx   â† NEW: Install prompt component
â”‚   â”‚
â”‚   â””â”€â”€ pages/
â”‚       â””â”€â”€ offline.astro       â† NEW: Offline fallback page
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ generate-pwa-icons.js           â† Icon generator (requires sharp)
â”‚   â””â”€â”€ generate-placeholder-icons.js   â† Placeholder generator
â”‚
â””â”€â”€ Docs/
    â”œâ”€â”€ PWA_IMPLEMENTATION.md    â† Full implementation guide
    â”œâ”€â”€ TESTING_CHECKLIST.md     â† Testing procedures
    â”œâ”€â”€ PWA_SUMMARY.md           â† Quick reference
    â””â”€â”€ PWA_ARCHITECTURE.txt     â† This file

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CACHE SIZES (Approximate)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

static-v1 cache:
  - /                             ~50 KB  (homepage HTML)
  - /hub                          ~80 KB  (tools hub HTML + inline CSS)
  - /offline                      ~30 KB  (offline page)
  Total: ~160 KB

dynamic-v1 cache (grows as user navigates):
  - /tools/pdf-merge              ~60 KB
  - /tools/image-compress         ~60 KB
  - /tools/qr-generator           ~50 KB
  - _astro/*.css                  ~100 KB (all CSS)
  - _astro/*.js                   ~400 KB (all JS bundles)
  - /thumbnails/*                 ~500 KB (tool thumbnails)
  Total after visiting 10 tools: ~2-5 MB

Total cache storage: ~5-10 MB (managed automatically by browser)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PERFORMANCE METRICS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

First visit (no cache):
  - Page load time:              ~1.5s  (network dependent)
  - SW registration:             ~100ms (background)
  - Cache population:            ~500ms (background)
  - Total overhead:              +12 KB (manifest + SW + component)

Subsequent visits (cached):
  - Page load time:              ~50ms  (from cache!)
  - Network requests:            0      (all from SW)
  - Cache hit rate:              ~95%   (most assets cached)

Offline mode:
  - Page load time:              ~30ms  (instant from cache)
  - Network requests:            0      (all offline)
  - Available tools:             All visited tools + static pages

Update detection:
  - Check frequency:             Every hour
  - Update download:             Background (doesn't block user)
  - User notification:           Prompt to reload
  - Apply time:                  ~100ms (on reload)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SECURITY & PRIVACY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Service Worker:
  â€¢ Scope: / (entire site)
  â€¢ Origin: same-origin only (cannot access external sites)
  â€¢ HTTPS required: Yes (except localhost for dev)
  â€¢ User consent: Browser-managed install flow

Cache Storage:
  â€¢ Client-side only: Data never leaves user's device
  â€¢ Size limits: Browser-managed (typically 50MB+)
  â€¢ Persistence: Until user clears browser data
  â€¢ Encryption: Same as browser (HTTPS in transit)

Privacy:
  â€¢ No tracking: Service worker doesn't phone home
  â€¢ No analytics: Install events not tracked (can add via Plausible)
  â€¢ No server access: All file processing client-side
  â€¢ Respects privacy mode: Service worker disabled in private browsing

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

End of PWA Architecture Documentation
