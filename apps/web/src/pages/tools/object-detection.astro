---
/**
 * AI Object Detection - AI-Native Tool Page
 *
 * Optimized for LLM extraction with:
 * - TL;DR answer box (50-70 words)
 * - Semantic Q&A sections
 * - Full schema markup (SoftwareApplication, HowTo, FAQPage)
 */
import Layout from '../../layouts/Layout.astro';
import TrustBar from '../../components/ui/TrustBar.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import AnswerBox from '../../components/seo/AnswerBox.astro';
import QASections from '../../components/seo/QASections.astro';
import RelatedTools from '../../components/seo/RelatedTools.astro';
import { getToolById } from '../../lib/tools';
import SchemaMarkup from '../../components/seo/SchemaMarkup.astro';
import ObjectDetectionComponent from '../../components/tools/ObjectDetection';

// Get tool data from Single Source of Truth (tools.ts)
const toolData = getToolById('object-detection');
if (!toolData) throw new Error('Tool not found: object-detection');

// Tool metadata derived from registry
const tool = {
  id: toolData.id,
  name: toolData.name,
  category: toolData.category,
  url: toolData.href
};

// AI-optimized content - SEO from tools.ts, extended content page-specific
const seoContent = {
  // Page meta from Single Source of Truth
  title: toolData.seo?.title || `${toolData.name} - Free Online Tool | New Life Solutions`,
  description: toolData.seo?.metaDescription || toolData.description,

  // TL;DR Answer Box (50-70 words - this is what AI extracts)
  answerBox: {
    title: toolData.seo?.h1 || 'Summarize Text & Documents with AI',
    queryTarget: toolData.seo?.keywords?.[0] || 'How to Summarize Documents Online Free',
    tldr: toolData.answer || `Paste text, upload a PDF/DOCX/TXT file, or enter a URL to generate an instant summary. Choose from brief, standard, or detailed lengths. Select bullet points, paragraphs, or key takeaways format. Use extractive mode for 100% local processing, or connect your own OpenAI/Claude API key for AI-powered summaries. Free, private, no signup required.`,
    trustSignals: [
      'DETR AI model',
      '80+ object types',
      '100% local processing',
      'No image upload'
    ]
  },

  // Q&A Sections
  qa: {
    whatIs: {
      answer: `AI object detection analyzes images to identify and locate objects within them. This tool uses DETR (DEtection TRansformer), a state-of-the-art deep learning model developed by Facebook AI Research. It can detect and classify 80+ common objects from the COCO dataset, including people, animals (cats, dogs, birds), vehicles (cars, trucks, motorcycles), furniture, electronics, and everyday items. The model draws bounding boxes around each detected object and provides a confidence score.`,
      context: `Object detection is a computer vision task that combines image classification (what object is it?) with localization (where is it?). Unlike basic image classification that only labels the entire image, object detection can find multiple objects in a single image and pinpoint their exact locations.`
    },
    howItWorks: {
      steps: [
        'Upload an image by dragging and dropping or clicking to select',
        'The AI model loads on first use (~160MB, cached for future sessions)',
        'Adjust the confidence threshold slider (default 70%) to control detection sensitivity',
        'Click "Detect Objects" to run the DETR model on your image',
        'View bounding boxes drawn around detected objects with labels and confidence scores',
        'See the complete list of detected objects with color-coded categories'
      ]
    },
    whyBrowserBased: {
      benefits: [
        'Privacy: Images are processed entirely in your browser using Transformers.js. Never uploaded to any server.',
        'Offline capable: After first model download, works without internet connection.',
        'No limits: Detect objects in unlimited images without account signup or API quotas.',
        'Fast: No network latency. Processing happens locally on your device.',
        'Free forever: No paid tier, no watermarks, no usage restrictions.'
      ]
    },
    faqs: [
      {
        question: 'What objects can the AI detect?',
        answer: `The DETR model is trained on the COCO dataset and can detect 80 object categories: person, bicycle, car, motorcycle, airplane, bus, train, truck, boat, traffic light, fire hydrant, stop sign, parking meter, bench, bird, cat, dog, horse, sheep, cow, elephant, bear, zebra, giraffe, backpack, umbrella, handbag, tie, suitcase, frisbee, skis, snowboard, sports ball, kite, baseball bat, baseball glove, skateboard, surfboard, tennis racket, bottle, wine glass, cup, fork, knife, spoon, bowl, banana, apple, sandwich, orange, broccoli, carrot, hot dog, pizza, donut, cake, chair, couch, potted plant, bed, dining table, toilet, TV, laptop, mouse, remote, keyboard, cell phone, microwave, oven, toaster, sink, refrigerator, book, clock, vase, scissors, teddy bear, hair drier, toothbrush.`
      },
      {
        question: 'How do I improve detection accuracy?',
        answer: `Use high-resolution images with good lighting and clear object boundaries. Lower the confidence threshold slider (try 50-60%) to detect more objects, though this may increase false positives. Higher thresholds (80-90%) show only very confident detections. The model works best with objects that are fully visible and not heavily occluded. Multiple objects of the same type in one image are detected independently.`
      },
      {
        question: 'Is my image uploaded to a server?',
        answer: `No. All AI processing happens locally in your browser using Transformers.js, which runs the DETR model using WebGL and WebAssembly. Your images never leave your device. The model weights are downloaded once (~160MB) and cached in your browser for future use.`
      },
      {
        question: 'Why is the first detection slow?',
        answer: `The first detection downloads the DETR model (~160MB) from HuggingFace CDN. This happens once and is cached permanently in your browser. Subsequent detections are much faster. The download progress is shown in the interface. On slower connections, this may take 1-2 minutes.`
      },
      {
        question: 'What image formats are supported?',
        answer: `All common image formats work: JPG, JPEG, PNG, WebP, GIF (first frame), BMP. The model automatically resizes images internally for processing while preserving the original aspect ratio for display.`
      },
      {
        question: 'Can I use this for commercial projects?',
        answer: `Yes. The tool is 100% free for personal and commercial use. The DETR model is released under Apache 2.0 license by Facebook AI Research. Your images are never uploaded, so there are no privacy or licensing concerns with your data.`
      }
    ]
  }
};

// Schema data
const schemaData = {
  toolId: tool.id,
  toolName: tool.name,
  description: seoContent.description,
  category: tool.category,
  steps: seoContent.qa.howItWorks.steps,
  faqs: seoContent.qa.faqs,
  url: tool.url
};
---

<Layout
  title={seoContent.title}
  description={seoContent.description}
  image="/thumbnails/object-detection.svg"
>
  <!-- Schema Markup for AI extraction -->
  <SchemaMarkup {...schemaData} />

  <Navbar />

  <main class="pt-20 pb-16 px-6 min-h-screen">
    <div class="max-w-5xl mx-auto">

      <!-- Answer Box: AI extracts this first -->
      <AnswerBox
        title={seoContent.answerBox.title}
        tldr={seoContent.answerBox.tldr}
        toolName={tool.name}
        queryTarget={seoContent.answerBox.queryTarget}
        trustSignals={seoContent.answerBox.trustSignals}
      />

      <!-- Tool Component -->
      <section class="tool-section" aria-label="AI Object Detection Tool">
        <ObjectDetectionComponent client:load />
        <TrustBar signals={seoContent.answerBox.trustSignals} />
      </section>

      <!-- Q&A Sections: Semantic structure for AI -->
      <QASections
        toolName={tool.name}
        whatIs={seoContent.qa.whatIs}
        howItWorks={seoContent.qa.howItWorks}
        whyBrowserBased={seoContent.qa.whyBrowserBased}
        faqs={seoContent.qa.faqs}
        stats={toolData?.stats}
      />

      <RelatedTools currentToolId="object-detection" />

    </div>
  </main>

  <Footer />
</Layout>

<style>
  .tool-section {
    margin: 2rem 0;
  }
</style>
