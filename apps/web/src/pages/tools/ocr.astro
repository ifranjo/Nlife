---
/**
 * OCR Text Extractor - AI-Native Tool Page
 *
 * Optimized for LLM extraction with:
 * - TL;DR answer box (50-70 words)
 * - Semantic Q&A sections
 * - Full schema markup (SoftwareApplication, HowTo, FAQPage)
 */
import Layout from '../../layouts/Layout.astro';
import TrustBar from '../../components/ui/TrustBar.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import AnswerBox from '../../components/seo/AnswerBox.astro';
import QASections from '../../components/seo/QASections.astro';
import { getToolById } from '../../lib/tools';
import SchemaMarkup from '../../components/seo/SchemaMarkup.astro';
import OcrExtractor from '../../components/tools/OcrExtractor';
import RelatedTools from '../../components/seo/RelatedTools.astro';

// Get tool data from Single Source of Truth (tools.ts)
const toolData = getToolById('ocr');
if (!toolData) throw new Error('Tool not found: ocr');

// Tool metadata derived from registry
const tool = {
  id: toolData.id,
  name: toolData.name,
  category: toolData.category,
  url: toolData.href
};

// AI-optimized content - SEO from tools.ts, extended content page-specific
const seoContent = {
  // Page meta from Single Source of Truth
  title: toolData.seo?.title || `${toolData.name} - Free Online Tool | New Life Solutions`,
  description: toolData.seo?.metaDescription || toolData.description,

  // TL;DR Answer Box (50-70 words - this is what AI extracts)
  answerBox: {
    title: toolData.seo?.h1 || 'Summarize Text & Documents with AI',
    queryTarget: toolData.seo?.keywords?.[0] || 'How to Summarize Documents Online Free',
    tldr: toolData.answer || `Paste text, upload a PDF/DOCX/TXT file, or enter a URL to generate an instant summary. Choose from brief, standard, or detailed lengths. Select bullet points, paragraphs, or key takeaways format. Use extractive mode for 100% local processing, or connect your own OpenAI/Claude API key for AI-powered summaries. Free, private, no signup required.`,
    trustSignals: [
      '15+ languages supported',
      'Multi-page PDF OCR',
      'Batch processing',
      'Export: TXT, DOCX, PDF',
      'Works offline'
    ]
  },

  // Q&A Sections
  qa: {
    whatIs: {
      answer: `OCR (Optical Character Recognition) Text Extractor is a powerful browser-based tool that converts images and multi-page scanned documents into editable text. Using the Tesseract.js engine with optional AI models (TrOCR), it recognizes text in 15+ languages. Features include batch processing for multiple files, per-page PDF results, and export to multiple formats (TXT, DOCX, searchable PDF).`,
      context: `Perfect for digitizing documents, extracting text from screenshots, processing scanned receipts in bulk, or converting image-based PDFs to searchable documents.`
    },
    howItWorks: {
      steps: [
        'Drag and drop images (PNG, JPG, WEBP) or PDFs onto the upload area—multiple files supported',
        'Choose your OCR engine (Tesseract for multi-language, TrOCR for handwritten) and select document language',
        'Optionally enable preprocessing (grayscale, contrast enhancement) for better accuracy',
        'Click "Extract Text" to process all files—watch per-page progress for multi-page PDFs',
        'View results per file, copy to clipboard, or download as TXT, DOCX, searchable PDF, or ZIP'
      ]
    },
    whyBrowserBased: {
      benefits: [
        'Complete privacy: Your files never leave your device or get uploaded to any server',
        'Batch processing: Process up to 20 images or PDFs at once with combined or separate output',
        'Multi-page PDF: See per-page progress and results, with confidence scores for each page',
        'Multiple export formats: Plain text, Word document, searchable PDF, or ZIP archive for batch results',
        'Works offline: After first load, Tesseract language data is cached and works without internet',
        'Preprocessing: Improve OCR accuracy with grayscale conversion and contrast enhancement'
      ]
    },
    faqs: toolData.faq || []
  }
};

// Schema data
const schemaData = {
  toolId: tool.id,
  toolName: tool.name,
  description: seoContent.description,
  category: tool.category,
  steps: seoContent.qa.howItWorks.steps,
  faqs: seoContent.qa.faqs,
  url: tool.url
};
---

<Layout
  title={seoContent.title}
  description={seoContent.description}
  image="/thumbnails/ocr.svg"
>
  <!-- Schema Markup for AI extraction -->
  <SchemaMarkup {...schemaData} />

  <Navbar />

  <main class="pt-20 pb-16 px-6 min-h-screen">
    <div class="max-w-3xl mx-auto">

      <!-- Answer Box: AI extracts this first -->
      <AnswerBox
        title={seoContent.answerBox.title}
        tldr={seoContent.answerBox.tldr}
        toolName={tool.name}
        queryTarget={seoContent.answerBox.queryTarget}
        trustSignals={seoContent.answerBox.trustSignals}
      />

      <!-- Tool Component -->
      <section class="tool-section" aria-label="OCR Text Extractor Tool">
        <OcrExtractor client:load />
        <TrustBar signals={seoContent.answerBox.trustSignals} />
      </section>

      <!-- Q&A Sections: Semantic structure for AI -->
      <QASections
        toolName={tool.name}
        whatIs={seoContent.qa.whatIs}
        howItWorks={seoContent.qa.howItWorks}
        whyBrowserBased={seoContent.qa.whyBrowserBased}
        faqs={seoContent.qa.faqs}
        stats={toolData?.stats}
      />

      <!-- Related Tools -->
      <RelatedTools currentToolId="ocr" />

    </div>
  </main>

  <Footer />
</Layout>

<style>
  .tool-section {
    margin: 2rem 0;
  }
</style>
