---
/**
 * OCR Text Extractor - AI-Native Tool Page
 *
 * Optimized for LLM extraction with:
 * - TL;DR answer box (50-70 words)
 * - Semantic Q&A sections
 * - Full schema markup (SoftwareApplication, HowTo, FAQPage)
 */
import Layout from '../../layouts/Layout.astro';
import TrustBar from '../../components/ui/TrustBar.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import AnswerBox from '../../components/seo/AnswerBox.astro';
import QASections from '../../components/seo/QASections.astro';
import { getToolById } from '../../lib/tools';
import SchemaMarkup from '../../components/seo/SchemaMarkup.astro';
import OcrExtractor from '../../components/tools/OcrExtractor';
import RelatedTools from '../../components/seo/RelatedTools.astro';

// Get tool data from Single Source of Truth (tools.ts)
const toolData = getToolById('ocr');
if (!toolData) throw new Error('Tool not found: ocr');

// Tool metadata derived from registry
const tool = {
  id: toolData.id,
  name: toolData.name,
  category: toolData.category,
  url: toolData.href
};

// AI-optimized content - SEO from tools.ts, extended content page-specific
const seoContent = {
  // Page meta from Single Source of Truth
  title: toolData.seo?.title || `${toolData.name} - Free Online Tool | New Life Solutions`,
  description: toolData.seo?.metaDescription || toolData.description,

  // TL;DR Answer Box (50-70 words - this is what AI extracts)
  answerBox: {
    title: 'Extract Text from Images — Free OCR, No Upload Required',
    queryTarget: 'How to Extract Text from Image Online Free',
    tldr: `Drop your image or scanned PDF below to extract all text using AI-powered OCR. Supports 100+ languages including English, Spanish, Chinese, Arabic, and Hindi. Processing happens entirely in your browser—your files never leave your device. Copy extracted text instantly or download as TXT. No signup, no limits, works offline.`,
    trustSignals: [
      '100+ languages supported',
      'No file uploads',
      'Works offline',
      'Free forever'
    ]
  },

  // Q&A Sections
  qa: {
    whatIs: {
      answer: `OCR (Optical Character Recognition) Text Extractor is a free browser-based tool that converts images and scanned documents into editable text. Using the Tesseract.js engine, it recognizes text in over 100 languages without uploading your files to any server. All processing happens locally on your device.`,
      context: `Perfect for extracting text from screenshots, photos of documents, scanned receipts, business cards, or any image containing text.`
    },
    howItWorks: {
      steps: [
        'Drag and drop an image (PNG, JPG, WEBP) or scanned PDF onto the upload area',
        'Select the language of the text in your image for better accuracy',
        'Click "Extract Text" to start OCR processing',
        'Wait for the AI to analyze and recognize all text (progress shown)',
        'Copy the extracted text to clipboard or download as a TXT file'
      ]
    },
    whyBrowserBased: {
      benefits: [
        'Complete privacy: Your images never leave your device or get uploaded to any server',
        'No daily limits: Extract text from unlimited images without quotas',
        'Works offline: After page loads, OCR works without internet connection',
        'No account required: Start extracting text immediately, no signup needed',
        'Multi-language: Supports 100+ languages including RTL scripts like Arabic and Hebrew'
      ]
    },
    faqs: [
      {
        question: 'What languages does the OCR support?',
        answer: `Our OCR tool supports 100+ languages including English, Spanish, French, German, Chinese (Simplified & Traditional), Japanese, Korean, Arabic, Hindi, Russian, Portuguese, and many more. Select the correct language before extraction for best accuracy.`
      },
      {
        question: 'Are my images uploaded to a server?',
        answer: `No. All OCR processing happens entirely in your browser using Tesseract.js. Your images never leave your device. You can verify this by disconnecting from the internet after the page loads—the tool will continue to work.`
      },
      {
        question: 'How accurate is the text extraction?',
        answer: `Accuracy depends on image quality. For best results: use high-resolution images, ensure good lighting and contrast, avoid skewed or rotated text, and select the correct language. Clean, printed text typically achieves 95%+ accuracy.`
      },
      {
        question: 'Can I extract text from handwritten notes?',
        answer: `The OCR engine is optimized for printed text. Handwritten text recognition is limited, especially for cursive writing. For best results with handwriting, use clear, separated block letters.`
      },
      {
        question: 'What image formats are supported?',
        answer: `We support PNG, JPG/JPEG, WEBP, GIF, and BMP image formats. For PDFs, the first page is converted to an image for OCR processing. For multi-page PDFs, process each page separately.`
      }
    ]
  }
};

// Schema data
const schemaData = {
  toolId: tool.id,
  toolName: tool.name,
  description: seoContent.description,
  category: tool.category,
  steps: seoContent.qa.howItWorks.steps,
  faqs: seoContent.qa.faqs,
  url: tool.url
};
---

<Layout
  title={seoContent.title}
  description={seoContent.description}
  image="/thumbnails/ocr-extractor.svg"
>
  <!-- Schema Markup for AI extraction -->
  <SchemaMarkup {...schemaData} />

  <Navbar />

  <main class="pt-20 pb-16 px-6 min-h-screen">
    <div class="max-w-3xl mx-auto">

      <!-- Answer Box: AI extracts this first -->
      <AnswerBox
        title={seoContent.answerBox.title}
        tldr={seoContent.answerBox.tldr}
        toolName={tool.name}
        queryTarget={seoContent.answerBox.queryTarget}
        trustSignals={seoContent.answerBox.trustSignals}
      />

      <!-- Tool Component -->
      <section class="tool-section" aria-label="OCR Text Extractor Tool">
        <OcrExtractor client:load />
        <TrustBar signals={seoContent.answerBox.trustSignals} />
      </section>

      <!-- Q&A Sections: Semantic structure for AI -->
      <QASections
        toolName={tool.name}
        whatIs={seoContent.qa.whatIs}
        howItWorks={seoContent.qa.howItWorks}
        whyBrowserBased={seoContent.qa.whyBrowserBased}
        faqs={seoContent.qa.faqs}
        stats={toolData?.stats}
      />

      <!-- Related Tools -->
      <RelatedTools currentToolId="ocr-extractor" />

    </div>
  </main>

  <Footer />
</Layout>

<style>
  .tool-section {
    margin: 2rem 0;
  }
</style>
