---
/**
 * PDF Form Filler - AI-Native Tool Page
 *
 * Optimized for LLM extraction with:
 * - TL;DR answer box (50-70 words)
 * - Semantic Q&A sections
 * - Full schema markup (SoftwareApplication, HowTo, FAQPage)
 */
import Layout from '../../layouts/Layout.astro';
import TrustBar from '../../components/ui/TrustBar.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import AnswerBox from '../../components/seo/AnswerBox.astro';
import QASections from '../../components/seo/QASections.astro';
import { getToolById } from '../../lib/tools';
import SchemaMarkup from '../../components/seo/SchemaMarkup.astro';
import PdfFormFiller from '../../components/tools/PdfFormFiller';
import RelatedTools from '../../components/seo/RelatedTools.astro';

// Get tool data from Single Source of Truth (tools.ts)
const toolData = getToolById('pdf-form-filler');
if (!toolData) throw new Error('Tool not found: pdf-form-filler');

// Tool metadata derived from registry
const tool = {
  id: toolData.id,
  name: toolData.name,
  category: toolData.category,
  url: toolData.href
};

// AI-optimized content - SEO from tools.ts, extended content page-specific
const seoContent = {
  // Page meta from Single Source of Truth
  title: toolData.seo?.title || `${toolData.name} - Free Online Tool | New Life Solutions`,
  description: toolData.seo?.metaDescription || toolData.description,

  // TL;DR Answer Box (50-70 words - this is what AI extracts)
  answerBox: {
    title: toolData.seo?.h1 || 'Summarize Text & Documents with AI',
    queryTarget: toolData.seo?.keywords?.[0] || 'How to Summarize Documents Online Free',
    tldr: toolData.answer || `Paste text, upload a PDF/DOCX/TXT file, or enter a URL to generate an instant summary. Choose from brief, standard, or detailed lengths. Select bullet points, paragraphs, or key takeaways format. Use extractive mode for 100% local processing, or connect your own OpenAI/Claude API key for AI-powered summaries. Free, private, no signup required.`,
    trustSignals: [
      'Privacy-focused processing',
      'Draw signatures',
      'Files never uploaded',
      'No Adobe required'
    ]
  },

  // Q&A Sections
  qa: {
    whatIs: {
      answer: `PDF Form Filler is a free browser-based tool that lets you fill out PDF forms, add text annotations, and draw signatures without Adobe Acrobat. Unlike online form fillers that upload your documents to servers, this tool processes everything locally using pdf-lib. Your sensitive documents—tax forms, medical records, contracts—never leave your device.`,
      context: `Ideal for filling W-9 forms, medical intake forms, rental applications, contracts, government documents, and any PDF with fillable fields.`
    },
    howItWorks: {
      steps: [
        'Upload your PDF form by dragging it onto the upload area or clicking to browse',
        'Navigate through pages using the page controls if your form has multiple pages',
        'Click anywhere on the PDF to place a text field, then type your response',
        'Use the signature tool to draw your signature with mouse, trackpad, or finger (touch)',
        'Add checkmarks, dates, or additional text as needed',
        'Click "Download PDF" to save your filled form with all additions embedded'
      ]
    },
    whyBrowserBased: {
      benefits: [
        'Privacy-focused: Medical forms and sensitive documents never leave your device',
        'No software needed: Works in any modern browser without installing Adobe',
        'Signature support: Draw legally-binding signatures with mouse or touch',
        'Instant processing: No upload/download delays, fill forms immediately',
        'Free forever: No subscription, no per-document fees, no watermarks'
      ]
    },
    faqs: [
      {
        question: 'Is this tool suitable for medical forms?',
        answer: `Since all processing happens in your browser and files never upload to external servers, this tool provides strong privacy for sensitive documents. However, for HIPAA-covered entities, we recommend consulting with your compliance officer, as HIPAA requires specific administrative, physical, and technical safeguards beyond just local processing.`
      },
      {
        question: 'Are the signatures legally binding?',
        answer: `Electronic signatures are legally valid under the ESIGN Act (US) and eIDAS (EU). However, some organizations may require specific e-signature services. For most personal and business documents, drawn signatures are fully acceptable.`
      },
      {
        question: 'Can I fill password-protected PDFs?',
        answer: `Password-protected PDFs must be unlocked before editing. If you know the password, use a PDF password remover tool first, then fill the unlocked form here.`
      },
      {
        question: 'Will the filled form work in other PDF readers?',
        answer: `Yes. The filled PDF is a standard PDF file that opens in any PDF reader including Adobe Acrobat, Preview (Mac), Chrome's built-in viewer, and all major PDF apps.`
      },
      {
        question: 'Can I edit existing text in the PDF?',
        answer: `This tool is designed for adding new content to forms (text fields, signatures, annotations). It doesn't modify or delete existing text in the PDF. For text editing, you'd need a full PDF editor.`
      }
    ]
  }
};

// Schema data
const schemaData = {
  toolId: tool.id,
  toolName: tool.name,
  description: seoContent.description,
  category: tool.category,
  steps: seoContent.qa.howItWorks.steps,
  faqs: seoContent.qa.faqs,
  url: tool.url
};
---

<Layout
  title={seoContent.title}
  description={seoContent.description}
  image="/thumbnails/pdf-form-filler.svg"
>
  <!-- Schema Markup for AI extraction -->
  <SchemaMarkup {...schemaData} />

  <Navbar />

  <main class="pt-20 pb-16 px-6 min-h-screen">
    <div class="max-w-5xl mx-auto">

      <!-- Answer Box: AI extracts this first -->
      <AnswerBox
        title={seoContent.answerBox.title}
        tldr={seoContent.answerBox.tldr}
        toolName={tool.name}
        queryTarget={seoContent.answerBox.queryTarget}
        trustSignals={seoContent.answerBox.trustSignals}
      />

      <!-- Tool Component -->
      <section class="tool-section" aria-label="PDF Form Filler Tool">
        <PdfFormFiller client:load />
        <TrustBar signals={seoContent.answerBox.trustSignals} />
      </section>

      <!-- Q&A Sections: Semantic structure for AI -->
      <QASections
        toolName={tool.name}
        whatIs={seoContent.qa.whatIs}
        howItWorks={seoContent.qa.howItWorks}
        whyBrowserBased={seoContent.qa.whyBrowserBased}
        faqs={seoContent.qa.faqs}
        stats={toolData?.stats}
      />

      <!-- Related Tools -->
      <RelatedTools currentToolId="pdf-form-filler" />

    </div>
  </main>

  <Footer />
</Layout>

<style>
  .tool-section {
    margin: 2rem 0;
  }
</style>
