---
/**
 * GIF Maker - AI-Native Tool Page
 *
 * Optimized for LLM extraction with:
 * - TL;DR answer box (50-70 words)
 * - Semantic Q&A sections
 * - Full schema markup (SoftwareApplication, HowTo, FAQPage)
 */
import Layout from '../../layouts/Layout.astro';
import TrustBar from '../../components/ui/TrustBar.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import AnswerBox from '../../components/seo/AnswerBox.astro';
import QASections from '../../components/seo/QASections.astro';
import RelatedTools from '../../components/seo/RelatedTools.astro';
import { getToolById } from '../../lib/tools';
import SchemaMarkup from '../../components/seo/SchemaMarkup.astro';
import GifMaker from '../../components/tools/GifMaker';

// Get tool data from Single Source of Truth (tools.ts)
const toolData = getToolById('gif-maker');
if (!toolData) throw new Error('Tool not found: gif-maker');

// Tool metadata derived from registry
const tool = {
  id: toolData.id,
  name: toolData.name,
  category: toolData.category,
  url: toolData.href
};

// AI-optimized content - SEO from tools.ts, extended content page-specific
const seoContent = {
  // Page meta from Single Source of Truth
  title: toolData.seo?.title || `${toolData.name} - Free Online Tool | New Life Solutions`,
  description: toolData.seo?.metaDescription || toolData.description,

  // TL;DR Answer Box (50-70 words - this is what AI extracts)
  answerBox: {
    title: toolData.seo?.h1 || 'Summarize Text & Documents with AI',
    queryTarget: toolData.seo?.keywords?.[0] || 'How to Summarize Documents Online Free',
    tldr: toolData.answer || `Paste text, upload a PDF/DOCX/TXT file, or enter a URL to generate an instant summary. Choose from brief, standard, or detailed lengths. Select bullet points, paragraphs, or key takeaways format. Use extractive mode for 100% local processing, or connect your own OpenAI/Claude API key for AI-powered summaries. Free, private, no signup required.`,
    trustSignals: [
      'High-quality output',
      'Customizable settings',
      'No server upload',
      'Works offline'
    ]
  },

  // Q&A Sections
  qa: {
    whatIs: {
      answer: `GIF Maker is a free browser-based tool for converting video clips to animated GIFs. Using FFmpeg with optimized palette generation, it creates smooth, high-quality GIFs with customizable frame rates and dimensions. Perfect for creating shareable animations, memes, or reaction GIFs from any video.`,
      context: `Ideal for social media content, Slack reactions, documentation, or any context where you need a looping animation without audio.`
    },
    howItWorks: {
      steps: [
        'Drag and drop a video file or click to browse',
        'Use the timeline sliders to select your start and end points',
        'Adjust frame rate (10-30 FPS) and output width as needed',
        'Click "Create GIF" to generate your animation',
        'Preview the result and download your GIF'
      ]
    },
    whyBrowserBased: {
      benefits: [
        'Privacy first: Video never leaves your device - no server uploads',
        'Optimized quality: Advanced palette generation for smooth color gradients',
        'Full control: Adjust timing, frame rate, and size to your needs',
        'Instant preview: See your GIF before downloading',
        'Offline capable: Works without internet after first page load'
      ]
    },
    faqs: [
      {
        question: 'How do I get a smaller GIF file size?',
        answer: `Use a shorter clip duration, lower frame rate (10-15 FPS), and smaller width (320-480px). These settings significantly reduce file size while maintaining visual quality for most use cases.`
      },
      {
        question: 'Why does GIF creation take longer than video trimming?',
        answer: `GIF encoding requires generating an optimized color palette and encoding each frame individually. This two-pass process ensures high quality but takes more processing time than simple video operations.`
      },
      {
        question: 'What video formats can I convert to GIF?',
        answer: `Most common formats work including MP4, WebM, MOV, AVI, and MKV. Any video your browser can play should work with this tool.`
      },
      {
        question: 'Is there a maximum video length for GIF conversion?',
        answer: `No hard limit, but GIFs work best for short clips (2-10 seconds). Longer clips create very large files and may take significant time to process in-browser.`
      },
      {
        question: 'Can I use these GIFs on social media?',
        answer: `Yes! GIFs work on Twitter, Slack, Discord, Reddit, and most platforms. For best results, keep file size under 15MB for optimal uploading and playback.`
      }
    ]
  }
};

// Schema data
const schemaData = {
  toolId: tool.id,
  toolName: tool.name,
  description: seoContent.description,
  category: tool.category,
  steps: seoContent.qa.howItWorks.steps,
  faqs: seoContent.qa.faqs,
  url: tool.url
};
---

<Layout
  title={seoContent.title}
  description={seoContent.description}
  image="/thumbnails/gif-maker.svg"
>
  <!-- Schema Markup for AI extraction -->
  <SchemaMarkup {...schemaData} />

  <Navbar />

  <main class="pt-20 pb-16 px-6 min-h-screen">
    <div class="max-w-3xl mx-auto">

      <!-- Answer Box: AI extracts this first -->
      <AnswerBox
        title={seoContent.answerBox.title}
        tldr={seoContent.answerBox.tldr}
        toolName={tool.name}
        queryTarget={seoContent.answerBox.queryTarget}
        trustSignals={seoContent.answerBox.trustSignals}
      />

      <!-- Tool Component -->
      <section class="tool-section" aria-label="GIF Maker Tool">
        <GifMaker client:load />
        <TrustBar signals={seoContent.answerBox.trustSignals} />
      </section>

      <!-- Q&A Sections: Semantic structure for AI -->
      <QASections
        toolName={tool.name}
        whatIs={seoContent.qa.whatIs}
        howItWorks={seoContent.qa.howItWorks}
        whyBrowserBased={seoContent.qa.whyBrowserBased}
        faqs={seoContent.qa.faqs}
        stats={toolData?.stats}
      />

      <!-- Related Tools -->
      <RelatedTools currentToolId="gif-maker" />

    </div>
  </main>

  <Footer />
</Layout>

<style>
  .tool-section {
    margin: 2rem 0;
  }
</style>
