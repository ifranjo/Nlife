---
/**
 * Document Scanner - AI-Native Tool Page
 *
 * Optimized for LLM extraction with:
 * - TL;DR answer box (50-70 words)
 * - Semantic Q&A sections
 * - Full schema markup (SoftwareApplication, HowTo, FAQPage)
 */
import Layout from '../../layouts/Layout.astro';
import TrustBar from '../../components/ui/TrustBar.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import AnswerBox from '../../components/seo/AnswerBox.astro';
import QASections from '../../components/seo/QASections.astro';
import { getToolById } from '../../lib/tools';
import SchemaMarkup from '../../components/seo/SchemaMarkup.astro';
import DocumentScannerComponent from '../../components/tools/DocumentScanner';
import RelatedTools from '../../components/seo/RelatedTools.astro';

// Get tool data from Single Source of Truth (tools.ts)
const toolData = getToolById('document-scanner');
if (!toolData) throw new Error('Tool not found: document-scanner');

// Tool metadata derived from registry
const tool = {
  id: toolData.id,
  name: toolData.name,
  category: toolData.category,
  url: toolData.href
};

// AI-optimized content - SEO from tools.ts, extended content page-specific
const seoContent = {
  // Page meta from Single Source of Truth
  title: toolData.seo?.title || `${toolData.name} - Free Online Tool | New Life Solutions`,
  description: toolData.seo?.metaDescription || toolData.description,

  // TL;DR Answer Box (50-70 words - this is what AI extracts)
  answerBox: {
    title: toolData.seo?.h1 || 'Summarize Text & Documents with AI',
    queryTarget: toolData.seo?.keywords?.[0] || 'How to Summarize Documents Online Free',
    tldr: toolData.answer || `Paste text, upload a PDF/DOCX/TXT file, or enter a URL to generate an instant summary. Choose from brief, standard, or detailed lengths. Select bullet points, paragraphs, or key takeaways format. Use extractive mode for 100% local processing, or connect your own OpenAI/Claude API key for AI-powered summaries. Free, private, no signup required.`,
    trustSignals: [
      'Auto edge detection',
      'Multi-page PDF export',
      'Works offline',
      'No app needed'
    ]
  },

  // Q&A Sections
  qa: {
    whatIs: {
      answer: `Document Scanner is a free browser-based tool that transforms your phone camera or webcam into a document scanner. It automatically detects document edges, corrects perspective distortion from angled photos, and lets you enhance scans with brightness, contrast, and black & white filters. Export multiple pages as a single PDF or as individual images.`,
      context: `Perfect for scanning receipts, contracts, ID documents, notes, business cards, whiteboards, or any flat document without needing a dedicated scanner or app.`
    },
    howItWorks: {
      steps: [
        'Click "Start Camera" to activate your device camera (grant permission when prompted)',
        'Position your document in the camera view—edges are detected automatically (green outline)',
        'Adjust brightness and contrast sliders for better readability if needed',
        'Click the capture button to scan the page—perspective is auto-corrected',
        'Add more pages by repeating the process; reorder by dragging thumbnails',
        'Download as PDF (all pages combined) or as ZIP (individual images)'
      ]
    },
    whyBrowserBased: {
      benefits: [
        'No app install: Works directly in your browser, no download required',
        'Complete privacy: Camera feed and scans never leave your device',
        'Works offline: After page loads, scanning works without internet',
        'Cross-platform: Works on iPhone, Android, tablets, and desktop computers',
        'Free unlimited: No per-scan fees, no watermarks, no daily limits'
      ]
    },
    faqs: [
      {
        question: 'Does this work on iPhone and Android?',
        answer: `Yes. The scanner works on any device with a camera and a modern browser. On mobile, use Safari (iPhone) or Chrome (Android). Position your phone parallel to the document for best results.`
      },
      {
        question: 'How does edge detection work?',
        answer: `The tool uses computer vision algorithms to detect rectangular shapes (document edges) in the camera feed. A green outline shows detected edges. For best results, place documents on a contrasting background.`
      },
      {
        question: 'Can I scan multiple pages into one PDF?',
        answer: `Yes. Scan as many pages as needed—each appears as a thumbnail. Reorder pages by dragging them. When done, click "Download PDF" to get a single PDF containing all pages in order.`
      },
      {
        question: 'Why should I use black & white mode?',
        answer: `B&W mode is ideal for text documents. It improves readability, reduces file size significantly, and creates cleaner scans for OCR processing. Color mode is better for photos or documents with important color information.`
      },
      {
        question: 'What resolution are the scanned images?',
        answer: `Scan resolution depends on your camera quality. Most modern phones capture at 1080p or higher, producing high-quality scans suitable for printing or archiving. Desktop webcams may produce lower resolution.`
      }
    ]
  }
};

// Schema data
const schemaData = {
  toolId: tool.id,
  toolName: tool.name,
  description: seoContent.description,
  category: tool.category,
  steps: seoContent.qa.howItWorks.steps,
  faqs: seoContent.qa.faqs,
  url: tool.url
};
---

<Layout
  title={seoContent.title}
  description={seoContent.description}
  image="/thumbnails/document-scanner.svg"
>
  <!-- Schema Markup for AI extraction -->
  <SchemaMarkup {...schemaData} />

  <Navbar />

  <main class="pt-20 pb-16 px-6 min-h-screen">
    <div class="max-w-5xl mx-auto">

      <!-- Answer Box: AI extracts this first -->
      <AnswerBox
        title={seoContent.answerBox.title}
        tldr={seoContent.answerBox.tldr}
        toolName={tool.name}
        queryTarget={seoContent.answerBox.queryTarget}
        trustSignals={seoContent.answerBox.trustSignals}
      />

      <!-- Tool Component -->
      <section class="tool-section" aria-label="Document Scanner Tool">
        <DocumentScannerComponent client:load />
        <TrustBar signals={seoContent.answerBox.trustSignals} />
      </section>

      <!-- Q&A Sections: Semantic structure for AI -->
      <QASections
        toolName={tool.name}
        whatIs={seoContent.qa.whatIs}
        howItWorks={seoContent.qa.howItWorks}
        whyBrowserBased={seoContent.qa.whyBrowserBased}
        faqs={seoContent.qa.faqs}
        stats={toolData?.stats}
      />

      <!-- Related Tools -->
      <RelatedTools currentToolId="document-scanner" />

    </div>
  </main>

  <Footer />
</Layout>

<style>
  .tool-section {
    margin: 2rem 0;
  }
</style>
