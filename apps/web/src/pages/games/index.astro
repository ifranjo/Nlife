---
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import GameCard from '../../components/ui/GameCard.astro';
import { games, categoryInfo, getLiveGames, getComingSoonGames } from '../../lib/games';

// SEO metadata
const title = 'Games Hub - Free Browser Games | New Life Solutions';
const description = 'Play free browser games. Puzzle, arcade, casual, and daily games. No download, no ads, 100% free. All games run in your browser.';

// Organize games
const liveGames = getLiveGames();
const comingSoonGames = getComingSoonGames();
const categories = Object.entries(categoryInfo);
---

<Layout title={title} description={description} canonicalUrl="https://www.newlifesolutions.dev/games/">
  <Navbar />
  <main class="pt-16">
    <!-- Hero Section -->
    <section class="py-20 px-6 border-b border-[var(--border)]">
      <div class="max-w-4xl mx-auto text-center">
        <div class="text-4xl mb-6 opacity-60">ðŸŽ®</div>
        <h1 class="text-2xl uppercase tracking-[0.3em] mb-4">Games Hub</h1>
        <p class="text-[var(--text-dim)] text-sm max-w-2xl mx-auto leading-relaxed mb-8">
          Free browser games with no downloads, no ads, and no tracking.
          Just fun, right in your browser.
        </p>

        <!-- Category Pills -->
        <div class="flex flex-wrap justify-center gap-3 mb-8">
          {categories.map(([key, info]) => (
            <button
              class="category-pill px-4 py-2 text-xs uppercase tracking-[0.15em] border border-[var(--border)] bg-transparent text-[var(--text-dim)] hover:border-[var(--accent)] hover:text-[var(--accent)] transition-all"
              data-category={key}
            >
              <span class="mr-2">{info.icon}</span>
              {info.label}
            </button>
          ))}
          <button
            class="category-pill active px-4 py-2 text-xs uppercase tracking-[0.15em] border border-[var(--accent)] bg-transparent text-[var(--accent)] transition-all"
            data-category="all"
          >
            All Games
          </button>
        </div>

        <!-- Stats -->
        <div class="flex justify-center gap-8 text-[0.625rem] text-[var(--text-muted)] uppercase tracking-[0.15em]">
          <span>{games.length} Games</span>
          <span>|</span>
          <span>{liveGames.length} Playable Now</span>
          <span>|</span>
          <span>100% Free</span>
        </div>
      </div>
    </section>

    <!-- Live Games Section -->
    {liveGames.length > 0 && (
      <section id="live-games" class="py-16 px-6">
        <div class="max-w-7xl mx-auto">
          <div class="text-center mb-12">
            <div class="text-2xl mb-4 opacity-60">â–¶</div>
            <h2 class="text-xl uppercase tracking-[0.2em] mb-2">Play Now</h2>
            <p class="text-[var(--text-dim)] text-xs">Games ready to play</p>
          </div>

          <div class="game-grid grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
            {liveGames.map(game => (
              <GameCard game={game} />
            ))}
          </div>
        </div>
      </section>
    )}

    <!-- Coming Soon Section -->
    {comingSoonGames.length > 0 && (
      <section id="coming-soon" class="py-16 px-6 border-t border-[var(--border)]">
        <div class="max-w-7xl mx-auto">
          <div class="text-center mb-12">
            <div class="text-2xl mb-4 opacity-60">ðŸš€</div>
            <h2 class="text-xl uppercase tracking-[0.2em] mb-2">Coming Soon</h2>
            <p class="text-[var(--text-dim)] text-xs">More games on the way</p>
          </div>

          <div class="game-grid grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
            {comingSoonGames.map(game => (
              <GameCard game={game} />
            ))}
          </div>
        </div>
      </section>
    )}

    <!-- About Section -->
    <section id="about" class="py-20 px-6 border-t border-[var(--border)]">
      <div class="max-w-2xl mx-auto text-center">
        <div class="text-3xl mb-6 opacity-60">âˆž</div>
        <h2 class="text-xl uppercase tracking-[0.3em] mb-6">About Our Games</h2>
        <p class="text-[var(--text-dim)] text-sm leading-relaxed mb-8">
          All games are built with the same privacy-first philosophy as our tools.
          No accounts required. No data collection. No ads. Just games.
        </p>
        <div class="flex justify-center gap-8 text-[0.625rem] text-[var(--text-muted)] uppercase tracking-[0.15em]">
          <span>No Downloads</span>
          <span>|</span>
          <span>No Ads</span>
          <span>|</span>
          <span>100% Free</span>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<!-- JSON-LD Structured Data for SEO -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": title,
  "description": description,
  "url": "https://www.newlifesolutions.dev/games/",
  "about": {
    "@type": "Thing",
    "name": "Browser-based games"
  },
  "mainEntity": {
    "@type": "ItemList",
    "itemListElement": games.map((game, index) => ({
      "@type": "ListItem",
      "position": index + 1,
      "item": {
        "@type": "VideoGame",
        "name": game.name,
        "description": game.description,
        "url": `https://www.newlifesolutions.dev${game.href}`,
        "genre": game.category,
        "playMode": "SinglePlayer",
        "applicationCategory": "Game"
      }
    }))
  }
})} />

<script>
  // Category filter functionality
  const pills = document.querySelectorAll('.category-pill');
  const gameCards = document.querySelectorAll('.game-grid > a');

  pills.forEach(pill => {
    pill.addEventListener('click', () => {
      const category = pill.getAttribute('data-category');

      // Update active state
      pills.forEach(p => {
        p.classList.remove('active');
        p.style.borderColor = '';
        p.style.color = '';
      });
      pill.classList.add('active');
      pill.style.borderColor = 'var(--accent)';
      pill.style.color = 'var(--accent)';

      // Filter cards
      gameCards.forEach(card => {
        const cardCategory = card.getAttribute('data-category');
        if (category === 'all' || cardCategory === category) {
          (card as HTMLElement).style.display = '';
        } else {
          (card as HTMLElement).style.display = 'none';
        }
      });
    });
  });
</script>

<style>
  .category-pill.active {
    border-color: var(--accent) !important;
    color: var(--accent) !important;
  }
</style>
