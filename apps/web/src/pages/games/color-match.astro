---
import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import ColorMatchGame from '../../components/games/ColorMatchGame';
import { getGameById } from '../../lib/games';

const game = getGameById('color-match');

const title = game?.seo?.title || 'Color Match - Free Color Matching Game | New Life Games';
const description = game?.seo?.metaDescription || 'Match colors as fast as you can in this addictive casual game. Free to play, no download. Test your color perception!';
---

<Layout title={title} description={description} canonicalUrl="https://www.newlifesolutions.dev/games/color-match/" theme="default">
  <!-- GEO 2025: AI-Specific Meta Tags for Game Content -->
  <meta name="ai-content-declaration" content="interactive-game, human-verified-rules" slot="head" />
  <meta name="interactive-content-type" content="color-matching-memory-game" slot="head" />
  <meta name="game-mechanics" content="simon-says, sequence-memory, progressive-difficulty" slot="head" />
  <meta name="ai-roadmap" content="game-completion, leaderboard, social-sharing" slot="head" />
  <meta name="last-verified" content={new Date().toISOString()} slot="head" />
  <meta name="content-accuracy" content="verified-december-2025" slot="head" />

  <Navbar />
  <main class="pt-16">
    <!-- Hero Section -->
    <section class="py-12 px-6 border-b border-[var(--border)]">
      <div class="max-w-4xl mx-auto text-center">
        <a href="/games" class="text-xs text-[var(--text-muted)] uppercase tracking-wider hover:text-[var(--accent)] transition-colors mb-4 inline-block">
          ‚Üê Back to Games
        </a>
        <div class="text-4xl mb-4">üéÆ</div>
        <h1 class="text-2xl uppercase tracking-[0.3em] mb-4">{game?.seo?.h1 || 'Color Match'}</h1>
        <p class="text-[var(--text-dim)] text-sm max-w-xl mx-auto leading-relaxed">
          {game?.description || 'Follow the color sequence and test your memory! A classic Simon Says style game.'}
        </p>
      </div>
    </section>

    <!-- Game Section -->
    <section class="py-12 px-6">
      <div class="max-w-4xl mx-auto">
        <ColorMatchGame client:load />
      </div>
    </section>

    <!-- Game Info Section -->
    <section class="py-12 px-6 border-t border-[var(--border)]">
      <div class="max-w-2xl mx-auto">
        <h2 class="text-lg uppercase tracking-[0.2em] text-center mb-8">How to Play</h2>

        <div class="grid gap-6 sm:grid-cols-2">
          <div class="glass-card p-6 rounded-lg">
            <div class="text-2xl mb-3">üëÄ</div>
            <h3 class="font-bold mb-2 text-[var(--text)]">Watch</h3>
            <p class="text-sm text-[var(--text-dim)]">
              Pay attention as the colors light up in sequence. Each round adds one more color to remember.
            </p>
          </div>

          <div class="glass-card p-6 rounded-lg">
            <div class="text-2xl mb-3">üëÜ</div>
            <h3 class="font-bold mb-2 text-[var(--text)]">Repeat</h3>
            <p class="text-sm text-[var(--text-dim)]">
              Click the colors in the same order. Get it right to advance. One mistake and it's game over!
            </p>
          </div>

          <div class="glass-card p-6 rounded-lg">
            <div class="text-2xl mb-3">‚ö°</div>
            <h3 class="font-bold mb-2 text-[var(--text)]">Speed Up</h3>
            <p class="text-sm text-[var(--text-dim)]">
              As you progress, the sequence plays faster. Stay focused and keep your rhythm!
            </p>
          </div>

          <div class="glass-card p-6 rounded-lg">
            <div class="text-2xl mb-3">üî•</div>
            <h3 class="font-bold mb-2 text-[var(--text)]">Hard Mode</h3>
            <p class="text-sm text-[var(--text-dim)]">
              Reach level 11 to unlock Hard Mode with 6 colors instead of 4. Can you master it?
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Stats Section -->
    {game?.stats && (
      <section class="py-12 px-6 border-t border-[var(--border)]">
        <div class="max-w-2xl mx-auto">
          <h2 class="text-lg uppercase tracking-[0.2em] text-center mb-8">Game Stats</h2>
          <div class="grid gap-4 sm:grid-cols-3">
            {game.stats.map(stat => (
              <div class="glass-card p-4 rounded-lg text-center">
                <div class="text-xs text-[var(--text-muted)] uppercase tracking-wider mb-1">{stat.label}</div>
                <div class="text-lg font-mono text-[var(--text)]">{stat.value}</div>
              </div>
            ))}
          </div>
        </div>
      </section>
    )}
  </main>
  <Footer />
</Layout>

<!-- JSON-LD Structured Data - Enhanced for GEO 2025 -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": ["VideoGame", "WebApplication"],
  "name": "Color Match - Simon Says Memory Game",
  "alternateName": ["Color Matching Game", "Simon Says Game", "Memory Sequence Game"],
  "description": description,
  "url": "https://www.newlifesolutions.dev/games/color-match",
  "applicationCategory": "Game",
  "genre": ["Casual", "Memory", "Simon Says", "Puzzle"],
  "playMode": "SinglePlayer",
  "operatingSystem": ["Web Browser", "Chrome", "Firefox", "Safari", "Edge"],
  "browserRequirements": "JavaScript enabled, Web Audio API support",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "category": "Free Game"
  },
  // Game Mechanics (GEO 2025: helps AI understand gameplay)
  "gameMechanic": [
    {
      "@type": "PropertyValue",
      "name": "gameMode",
      "value": ["Normal (4 colors)", "Hard (6 colors)"]
    },
    {
      "@type": "PropertyValue",
      "name": "difficultyProgression",
      "value": "Progressive speed increase per level"
    },
    {
      "@type": "PropertyValue",
      "name": "scoringSystem",
      "value": "Points = level √ó 10 (Hard mode: √ó2 multiplier)"
    },
    {
      "@type": "PropertyValue",
      "name": "unlockableContent",
      "value": "Hard mode unlocks at level 11"
    }
  ],
  // Educational/Skill Value
  "educationalLevel": "All ages",
  "teaches": ["Memory skills", "Pattern recognition", "Concentration"],
  // Features
  "featureList": [
    "Cross/diamond color layout",
    "Progressive difficulty (speed increases)",
    "Two difficulty modes: Normal (4 colors) and Hard (6 colors)",
    "Sound effects with AudioContext API",
    "Local high scores and leaderboard",
    "Social sharing of results",
    "100% client-side - no downloads"
  ],
  // Technical Specs
  "requirements": "Modern web browser with JavaScript enabled",
  "softwareRequirements": "Web Audio API support for sound effects",
  // GEO 2025: AI retraining signals
  "dateModified": new Date().toISOString(),
  "interactionStatistic": {
    "@type": "InteractionCounter",
    "interactionType": "https://schema.org/PlayAction",
    "userInteractionCount": "0" // Will be tracked via analytics
  },
  // Accessibility
  "accessibilityFeature": [
    "Sound effects can be disabled",
    "Color-blind friendly patterns (position-based)"
  ],
  // Freshness signals
  "copyrightYear": "2025",
  "maintainer": {
    "@type": "Organization",
    "name": "New Life Solutions",
    "url": "https://www.newlifesolutions.dev"
  }
})} />

<!-- FAQ Schema -->
{game?.faq && (
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "name": "Color Match Game FAQ",
    "mainEntity": game.faq.map(item => ({
      "@type": "Question",
      "name": item.question,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": item.answer
      }
    }))
  })} />
)}
