---
/**
 * Advanced Reporting Dashboard Page
 *
 * Advanced analytics dashboard for executive reports, trend analysis,
 * and GEO optimization insights
 */

import Layout from '../../layouts/Layout.astro';
import Navbar from '../../components/ui/Navbar.astro';
import Footer from '../../components/ui/Footer.astro';
import AdvancedReportingDashboard from '../../components/dashboard/AdvancedReportingDashboard.tsx';

// Security: Only show dashboard if analytics are enabled
const analyticsEnabled = import.meta.env.ENABLE_AI_ANALYTICS !== 'false';

// SEO metadata
const title = 'Advanced GEO Reporting | New Life Solutions';
const description = 'Executive analytics dashboard with trend analysis, insights, and recommendations for AI platform optimization.';
---

<Layout title={title} description={description}>
  <Navbar />

  <main class="pt-16">
    <!-- Hero Section -->
    <section class="py-20 px-6 border-b border-[var(--border)]">
      <div class="max-w-4xl mx-auto text-center">
        <div class="text-[0.625rem] uppercase tracking-[0.3em] text-[var(--text-muted)] mb-4">
          Executive Dashboard
        </div>
        <h1 class="text-3xl sm:text-4xl font-semibold mb-6">
          Advanced GEO Reporting
        </h1>
        <p class="text-[var(--text-dim)] text-base max-w-2xl mx-auto leading-relaxed mb-8">
          Comprehensive analytics with executive reports, trend analysis, pattern detection,
          and actionable insights. Monitor AI traffic performance and optimize for maximum impact.
        </p>
        <div class="flex flex-wrap justify-center gap-4 text-[0.625rem] text-[var(--text-muted)] uppercase tracking-[0.15em]">
          <span>Executive Reports</span>
          <span>Trend Analysis</span>
          <span>Pattern Detection</span>
          <span>Multi-Format Export</span>
        </div>
      </div>
    </section>

    <!-- Dashboard Section -->
    {analyticsEnabled ? (
      <section class="py-12 px-6">
        <div class="max-w-7xl mx-auto">
          <AdvancedReportingDashboard client:load />
        </div>
      </section>
    ) : (
      <section class="py-20 px-6">
        <div class="max-w-2xl mx-auto text-center">
          <div class="glass-card p-12">
            <div class="text-[var(--warning)] text-4xl mb-4">‚ö†Ô∏è</div>
            <h2 class="text-xl font-semibold mb-4">Analytics Not Enabled</h2>
            <p class="text-[var(--text-dim)] mb-6">
              AI Analytics tracking is currently disabled. To enable:
            </p>
            <div class="bg-[var(--bg-secondary)] p-4 rounded-lg border font-mono text-sm text-left overflow-x-auto mb-6">
              <pre>ENABLE_AI_ANALYTICS=true</pre>
            </div>
            <p class="text-[var(--text-dim)] text-sm">
              Set this environment variable and rebuild the application.
            </p>
          </div>
        </div>
      </section>
    )}

    <!-- Features Section -->
    <section class="py-20 px-6 border-t border-[var(--border)]">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl font-semibold mb-8 text-center">Advanced Reporting Features</h2>

        <div class="grid md:grid-cols-2 gap-8">
          <div class="glass-card p-8">
            <h3 class="text-lg font-semibold mb-4 text-[var(--success)]">üìä Executive Reports</h3>
            <ul class="space-y-3 text-[var(--text-dim)] text-sm">
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Daily executive summaries with key metrics
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                AI traffic growth tracking
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Platform performance comparison
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Automated insights and recommendations
              </li>
            </ul>
          </div>

          <div class="glass-card p-8">
            <h3 class="text-lg font-semibold mb-4 text-[var(--primary)]">üìà Trend Analysis</h3>
            <ul class="space-y-3 text-[var(--text-dim)] text-sm">
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                7-day, 30-day, and 90-day trend analysis
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Pattern detection (growth, decline, seasonal)
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Anomaly detection and alerts
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Simple trend-based predictions
              </li>
            </ul>
          </div>

          <div class="glass-card p-8">
            <h3 class="text-lg font-semibold mb-4 text-[var(--warning)]">üîç Comparative Analysis</h3>
            <ul class="space-y-3 text-[var(--text-dim)] text-sm">
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Industry benchmark comparisons
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Gap analysis with actionable insights
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Performance vs top performers
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Strategic optimization recommendations
              </li>
            </ul>
          </div>

          <div class="glass-card p-8">
            <h3 class="text-lg font-semibold mb-4 text-[var(--warning)]">üíæ Data Export</h3>
            <ul class="space-y-3 text-[var(--text-dim)] text-sm">
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Export to JSON, CSV formats
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Scheduled automated exports
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Custom date range selection
              </li>
              <li class="flex items-start gap-2">
                <span class="text-[var(--success)] mt-1">‚Ä¢</span>
                Compatible with BI tools
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Performance Impact -->
    <section class="py-20 px-6 border-t border-[var(--border)] bg-[var(--bg-secondary)]">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl font-semibold mb-6 text-center">Performance Impact</h2>

        <div class="grid md:grid-cols-3 gap-6">
          <div class="text-center">
            <div class="text-3xl font-bold text-[var(--success)] mb-2">99.5%</div>
            <div class="text-[var(--text-dim)]">
              Report Accuracy
              <div class="text-sm mt-1">No data discrepancies</div>
            </div>
          </div>

          <div class="text-center">
            <div class="text-3xl font-bold text-[var(--primary)] mb-2">10x</div>
            <div class="text-[var(--text-dim)]">
              Faster Analysis
              <div class="text-sm mt-1">vs manual reporting</div>
            </div>
          </div>

          <div class="text-center">
            <div class="text-3xl font-bold text-[var(--warning)] mb-2">24/7</div>
            <div class="text-[var(--text-dim)]">
              Automated Monitoring
              <div class="text-sm mt-1">Continuous analytics</div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style>
  .glass-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 12px;
    backdrop-filter: blur(10px);
  }
</style>

<!-- Advanced Reporting Configuration -->
<script>
  // Initialize reporting when page loads
  if (typeof window !== 'undefined') {
    const initReporting = () => {
      if (window.location.hostname !== 'localhost') {
        import('../../lib/advanced-reporting').then(({ advancedReporting }) => {
          advancedReporting.configure({
            enabled: true,
            autoGenerate: true,
            retentionDays: 30
          });
          console.log('üìä Advanced Reporting initialized');
        });
      }
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initReporting);
    } else {
      initReporting();
    }
  }
</script>

<!-- Structured Data for SEO -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Advanced GEO Reporting Dashboard",
  "description": "Executive analytics dashboard with trend analysis and AI optimization insights",
  "url": "https://www.newlifesolutions.dev/admin/advanced-reporting",
  "applicationCategory": "AnalyticsApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "featureList": [
    "Executive daily reports",
    "Trend analysis and forecasting",
    "Comparative benchmarking",
    "Multi-format data export",
    "Automated insights generation"
  ]
})} />
