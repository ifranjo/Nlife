---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/ui/Navbar.astro';
import Hero from '../components/ui/Hero.astro';
import { ToolHub } from '../components/tools/ToolHub';
import Footer from '../components/ui/Footer.astro';
import { tools } from '../lib/tools';
import { getLiveGames } from '../lib/games';

// Convert games to tools format so they appear in the hub
const liveGames = getLiveGames();
const gamesAsTools = liveGames.map(game => ({
  id: game.id,
  name: game.name,
  description: game.description,
  icon: 'ðŸŽ®',
  thumbnail: game.thumbnail,
  category: 'games' as const,
  tier: 'free' as const,
  href: game.href,
  color: 'from-purple-500 to-pink-500',
  tags: ['game', 'casual', 'puzzle', 'arcade'],
  popular: game.isNew || false,
  releaseDate: game.releaseDate || '2026-01-01',
  seo: game.seo,
  stats: game.stats
}));

// Combine tools and games
const allHubItems = [...tools, ...gamesAsTools];

// SEO metadata
const title = 'New Life Solutions - Free Privacy-First Browser Tools';
const description = 'Free online tools for developers and creatives. Merge PDFs, compress images, generate QR codes, and more. 100% browser-based, private, and secure. No signup required.';
---

<Layout title={title} description={description} canonicalUrl="https://www.newlifesolutions.dev/">
  <Navbar />
  <main class="pt-16">
    <Hero />

    <!-- Tool Hub with Search and Filters -->
    <section id="tools" class="py-20 px-6">
      <div class="max-w-7xl mx-auto">
        <!-- SEO-friendly heading structure -->
        <div class="text-center mb-16">
          <div class="text-3xl mb-4 opacity-60">â—‡</div>
          <h1 class="text-2xl uppercase tracking-[0.3em] mb-4">Tool Hub</h1>
          <p class="text-[var(--text-dim)] text-sm max-w-2xl mx-auto leading-relaxed">
            Browse our collection of {allHubItems.length} free browser-based tools and games. Search, filter by category,
            or sort by popularity to find exactly what you need.
          </p>
        </div>

        <!-- Interactive Tool Hub Component -->
        <ToolHub client:load tools={allHubItems} />
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-20 px-6 border-t border-[var(--border)]">
      <div class="max-w-2xl mx-auto text-center">
        <div class="text-3xl mb-6 opacity-60">âˆž</div>
        <h2 class="text-xl uppercase tracking-[0.3em] mb-6">About Our Tools</h2>
        <p class="text-[var(--text-dim)] text-sm leading-relaxed mb-8">
          New Life Solutions provides browser-based tools that respect your privacy.
          All processing happens locally on your device. Your files never leave your browser.
          No accounts. No tracking. No data collection.
        </p>
        <div class="flex justify-center gap-8 text-[0.625rem] text-[var(--text-muted)] uppercase tracking-[0.15em]">
          <span>Browser-Based</span>
          <span>â€¢</span>
          <span>No Upload</span>
          <span>â€¢</span>
          <span>100% Private</span>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<!-- JSON-LD Structured Data for SEO -->
<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": title,
  "description": description,
  "url": "https://www.newlifesolutions.dev/",
  "about": {
    "@type": "Thing",
    "name": "Browser-based productivity tools"
  },
  "mainEntity": {
    "@type": "ItemList",
    "itemListElement": tools.slice(0, 5).map((tool, index) => ({
      "@type": "ListItem",
      "position": index + 1,
      "name": tool.name,
      "description": tool.description,
      "url": `https://www.newlifesolutions.dev${tool.href}`
    }))
  }
})} />
