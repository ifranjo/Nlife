---
/**
 * SchemaMarkup - JSON-LD structured data for AI extraction
 *
 * Combines multiple schema types:
 * - SoftwareApplication: For the tool itself
 * - HowTo: For step-by-step usage
 * - FAQPage: For common questions
 * - BreadcrumbList: For navigation context
 */

interface FAQItem {
  question: string;
  answer: string;
}

interface Props {
  toolId: string;
  toolName: string;
  description: string;
  category: 'document' | 'media' | 'ai' | 'utility';
  steps: string[];
  faqs: FAQItem[];
  url: string;
}

const { toolId, toolName, description, category, steps, faqs, url } = Astro.props;

// Map category to schema applicationCategory
const categoryMap = {
  document: 'Productivity',
  media: 'Multimedia',
  ai: 'Artificial Intelligence',
  utility: 'Utilities'
};

const baseUrl = 'https://www.newlifesolutions.dev';

// SoftwareApplication schema
const softwareSchema = {
  '@context': 'https://schema.org',
  '@type': 'SoftwareApplication',
  name: toolName,
  description: description,
  url: `${baseUrl}${url}`,
  applicationCategory: categoryMap[category],
  operatingSystem: 'Any (Browser-based)',
  offers: {
    '@type': 'Offer',
    price: '0',
    priceCurrency: 'USD'
  },
  featureList: [
    '100% browser-based processing',
    'No file uploads to servers',
    'Works offline',
    'No registration required',
    'No watermarks or limits'
  ],
  provider: {
    '@type': 'Organization',
    name: 'New Life Solutions',
    url: baseUrl
  }
};

// HowTo schema
const howToSchema = {
  '@context': 'https://schema.org',
  '@type': 'HowTo',
  name: `How to use ${toolName}`,
  description: description,
  step: steps.map((stepText, index) => ({
    '@type': 'HowToStep',
    position: index + 1,
    text: stepText
  })),
  tool: {
    '@type': 'HowToTool',
    name: 'Web Browser'
  },
  totalTime: 'PT1M'
};

// FAQPage schema
const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: faqs.map((faq) => ({
    '@type': 'Question',
    name: faq.question,
    acceptedAnswer: {
      '@type': 'Answer',
      text: faq.answer
    }
  }))
};

// BreadcrumbList schema
const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: 'Home',
      item: baseUrl
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: 'Tools',
      item: `${baseUrl}/hub`
    },
    {
      '@type': 'ListItem',
      position: 3,
      name: toolName,
      item: `${baseUrl}${url}`
    }
  ]
};

// Organization schema (for site-wide authority)
const orgSchema = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: 'New Life Solutions',
  url: baseUrl,
  logo: `${baseUrl}/favicon.svg`,
  description: 'Free, private, browser-based tools for documents, images, and more.',
  sameAs: []
};
---

<!-- JSON-LD Structured Data for AI Extraction -->
<script type="application/ld+json" set:html={JSON.stringify(softwareSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(howToSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
<script type="application/ld+json" set:html={JSON.stringify(orgSchema)} />
