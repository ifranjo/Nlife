---
import type { Tool } from '../../lib/tools';

interface Props {
  tool: Tool;
}

const { tool } = Astro.props;

const isDisabled = tool.tier === 'coming' || tool.tier === 'pro';
const tagClass = tool.tier === 'free' ? 'tag-free' : tool.tier === 'pro' ? 'tag-pro' : 'tag-coming';

const categoryLabels: Record<Tool['category'], string> = {
  document: 'PDF & Docs',
  media: 'Images & Media',
  ai: 'AI Tools',
  utility: 'Text & Dev',
  games: 'Games'
};
const categoryLabel = categoryLabels[tool.category] ?? tool.category;
---

<a
  href={isDisabled ? undefined : tool.href}
  class:list={[
    'tool-card block',
    { 'opacity-50 cursor-not-allowed pointer-events-none': isDisabled }
  ]}
  data-category={tool.category}
>
  <!-- Header -->
  <div class="flex items-start justify-between mb-4">
    <div class="w-10 h-10 tool-icon">
      <img src={tool.thumbnail} alt={`${tool.name} icon`} class="w-full h-full" loading="lazy" />
    </div>
    <span class={`tag ${tagClass}`}>{tool.tier}</span>
  </div>

  <!-- Title -->
  <h3 class="tool-title text-[var(--text)] text-sm uppercase tracking-[0.1em] mb-2 font-medium">
    {tool.name}
  </h3>

  <!-- Description -->
  <p class="text-[var(--text-dim)] text-xs leading-relaxed mb-4">
    {tool.description}
  </p>

  <!-- Category & Arrow -->
  <div class="flex items-center justify-between">
    <span class="text-[0.625rem] text-[var(--text-muted)] uppercase tracking-[0.15em]">
      {categoryLabel}
    </span>
    {!isDisabled && (
      <svg class="tool-arrow w-4 h-4 text-[var(--text-muted)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 8l4 4m0 0l-4 4m4-4H3" />
      </svg>
    )}
  </div>
</a>
